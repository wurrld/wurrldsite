<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>wurrld.</title>
<link rel="icon" type="image/x-icon" href="favicon.iso">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="192x192" href="android-chrome-192x192.png">
<link rel="icon" type="image/png" sizes="512x512" href="android-chrome-512x512.png">
<link rel="manifest" href="site.webmanifest">
<link rel="mask-icon" href="safari-pinned-tab.svg" color="#ff0000">
<meta name="theme-color" content="#ff0000">
<script>
const cssLink = document.createElement('link');
cssLink.rel = 'stylesheet';
cssLink.href = 'home.css?v=' + new Date().getTime();
document.head.appendChild(cssLink);
</script>
</head>
<body>
<div class="container">
    <h1>wurrld.</h1>
</div>

<div class="square-wrapper" id="s1">
    <div class="square"></div>
    <p>WIP</p>
</div>
<div class="square-wrapper" id="s2">
    <div class="square"></div>
    <p>WIP</p>
</div>
<div class="square-wrapper" id="s3">
    <div class="square"></div>
    <p>WIP</p>
</div>
<div class="square-wrapper" id="s4">
    <div class="square"></div>
    <p>WIP</p>
</div>

<script>
const squares = document.querySelectorAll('.square-wrapper');
const heading = document.querySelector('h1');

function isOverlap(r1, r2) {
    return !(r1.left > r2.right || r1.right < r2.left || r1.top > r2.bottom || r1.bottom < r2.top);
}

function placeSquares() {
    const viewportWidth = window.innerWidth;
    const viewportHeight = window.innerHeight;
    const hRect = heading.getBoundingClientRect();
    const headingZone = {
        top: hRect.top - 10,
        bottom: hRect.bottom + 10,
        left: hRect.left - 10,
        right: hRect.right + 10
    };
    const placedRects = [];
    squares.forEach(square => {
        let width = square.offsetWidth;
        let height = square.offsetHeight;
        let attempts = 0;
        let pos = {};
        do {
            attempts++;
            const topPercent = Math.random() * 80 + 5;
            const leftPercent = Math.random() * 80 + 5;
            pos.top = (topPercent / 100) * viewportHeight;
            pos.left = (leftPercent / 100) * viewportWidth;
            const rect = {
                top: pos.top,
                left: pos.left,
                bottom: pos.top + height,
                right: pos.left + width
            };
            const collides = isOverlap(rect, headingZone) || placedRects.some(r => isOverlap(rect, r));
            if (!collides) {
                placedRects.push(rect);
                square.style.top = `${pos.top}px`;
                square.style.left = `${pos.left}px`;
                break;
            }
        } while (attempts < 100);
    });
}

placeSquares();

window.addEventListener('orientationchange', () => {
    if (window.matchMedia("(orientation: landscape)").matches) {
        location.reload();
    }
});
</script>
</body>
</html>
